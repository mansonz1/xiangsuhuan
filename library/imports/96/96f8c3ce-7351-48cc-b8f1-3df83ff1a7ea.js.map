{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\player.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","fallingDistance","setJump","jumpUp","moveBy","v2","easing","easeCubicActionIn","jumpDown","sequence","setDown","onLoad","score","director","getCollisionManager","enabled","scoreString","find","getComponent","over","overButton","total","console","log","active","random","Math","floor","child","node","children","i","length","trueBird","color","gameStart","jump","runAction","animationComponent","Animation","play","onCollisionEnter","other","self","tag","onDie","string","pause","start","update","dt","down"],"mappings":"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","file":"player.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n      jumpHeight: 130,\r\n      jumpDuration: 0.2,\r\n      fallingDistance: 20,\r\n\r\n    },\r\n    setJump () {\r\n      var jumpUp = cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n      var jumpDown = cc.moveBy(this.jumpDuration,cc.v2(0,0)).easing(cc.easeCubicActionIn());\r\n      \r\n      return (cc.sequence(jumpUp,jumpDown));\r\n  },\r\n   setDown () {\r\n    var jumpUp = cc.moveBy(this.jumpDuration,cc.v2(0,0)).easing(cc.easeCubicActionIn());\r\n    var jumpDown = cc.moveBy(this.jumpDuration,cc.v2(0,-this.fallingDistance)).easing(cc.easeCubicActionIn());\r\n    \r\n    return (cc.sequence(jumpUp,jumpDown));\r\n},\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n      \r\n      this.score = 0;\r\n      cc.director.getCollisionManager().enabled = true;\r\n\r\n      this.scoreString = cc.find(\"Canvas/Main Camera/jieshu/scoreString\").getComponent(\"cc.Label\");\r\n      this.over =cc.find(\"Canvas/Main Camera/jieshu\");\r\n      this.overButton =cc.find(\"Canvas/Main Camera/gameoverButton\");\r\n      this.total = cc.find(\"Canvas/Main Camera/score\").getComponent(\"cc.Label\");\r\n\r\n      console.log(this.total);\r\n      \r\n      this.over.active = false;\r\n      this.overButton.active = false;\r\n\r\n      var random = Math.floor(Math.random()*3);\r\n      this.child = this.node.children;\r\n      \r\n      for (var i = 0; i < this.child.length; i++) {\r\n        if (i != random) {\r\n          this.child[i].active = false;\r\n        } else {\r\n          this.child[i].active = true;\r\n          this.trueBird = this.child[i];\r\n          this.color = i;\r\n        }\r\n      };\r\n    },\r\n    gameStart () {\r\n      \r\n      this.jump = this.setJump();\r\n      this.node.runAction(this.jump);  \r\n      \r\n      \r\n      this.animationComponent = this.trueBird.getComponent(cc.Animation);\r\n  \r\n      \r\n      this.animationComponent.play(\"normal\");\r\n  },\r\n    onCollisionEnter: function (other, self) {\r\n      //碰环检测\r\n      if (other.tag == 0 || other.tag == 1 || other.tag == 2 || other.tag == 3) {\r\n        if (other.tag == this.color) {  \r\n          //ok\r\n          /* cc.log(\"good !!\") */\r\n         } else {\r\n           //ng\r\n          this.onDie();\r\n         }\r\n        }\r\n        //吃分检测\r\n        if (other.tag == 4) {\r\n          //ok\r\n          this.score += 1;\r\n          this.scoreString.string = this.score;\r\n          console.log(this.total.string)\r\n          this.total.string = \"总得分:\"+this.score;\r\n          other.enabled = false;\r\n          other.node.active = false;\r\n          return this.score;\r\n          /* console.log(\"当前得分:\"+this.score); */\r\n        }\r\n        //触地检测\r\n        if(other.tag == 5) {  \r\n           //ok\r\n         console.log(\"触地\");\r\n         this.onDie();\r\n          }\r\n    }, \r\n\r\n    onDie () {\r\n      console.log(this.score);\r\n      this.over.active = true;\r\n      this.overButton.active = true;\r\n      cc.director.pause();\r\n      \r\n    },\r\n    start() {},\r\n  update (dt) {\r\n    /* this.scoreString = this.score; */\r\n    this.down = this.setDown();\r\n    this.node.runAction(this.down);\r\n   },\r\n});\r\n"]}